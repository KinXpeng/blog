(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"0cfb5":function(e,t,o){"use strict";o("f363")},"9d64":function(e,t,o){e.exports=o.p+"img/logo.91d5176d.png"},dd7b:function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login-page"},[i("div",{ref:"login",staticClass:"login",attrs:{tabindex:"-1"}},[i("div",{staticClass:"login_title"},[i("el-image",{staticStyle:{width:"140px",height:"60px"},attrs:{src:o("9d64"),fit:"fit"}})],1),i("div",{staticClass:"login_input"},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.loginForm,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"账号",prop:"username","label-width":"70px"}},[i("el-input",{ref:"usernameInput",attrs:{type:"text"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),i("el-form-item",{attrs:{label:"密码",prop:"password","label-width":"70px"}},[i("el-input",{attrs:{type:e.flag?"text":"password",autocomplete:"off"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}},[i("i",{staticClass:"el-icon-view",style:e.flag?"color:#3b99fc;":"",attrs:{slot:"suffix",autocomplete:"auto"},on:{click:function(t){e.flag=!e.flag}},slot:"suffix"})])],1),i("el-form-item",{staticClass:"login_submit"},[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("登录")]),i("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1),i("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}]})],1)])])},s=[],n={data:function(){return{loading:!1,flag:!1,loginForm:{username:"",password:""},rules:{username:[{required:!0,message:"请输入账号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.loading=!0,t.$axios.post("/blog-api/user/login",t.loginForm).then((function(e){0===e.data.code?(setTimeout((function(){t.loading=!1,t.$notify({type:"success",position:"top-right",message:"登录成功"})}),500),sessionStorage.setItem("cookie",e.data.token),setTimeout((function(){t.$store.state.username=t.loginForm.username,t.$router.push({path:"/writeArticle"})}),1500)):setTimeout((function(){t.loading=!1,t.$notify({type:"error",position:"top-right",message:"账号或密码错误"})}),1e3)})).catch((function(e){setTimeout((function(){t.loading=!1,t.$notify({type:"error",position:"top-right",message:"服务器开小差了哦，请稍后再尝试登录。"})}),1e3),console.log(e)}))}))},resetForm:function(e){this.$refs[e].resetFields()}},mounted:function(){var e=this;this.$refs.usernameInput.focus(),this.$refs.login.onkeydown=function(){var t=window.event.keyCode;13==t&&e.submitForm("ruleForm")}}},r=n,l=(o("0cfb5"),o("2877")),a=Object(l["a"])(r,i,s,!1,null,"6665da71",null);t["default"]=a.exports},f363:function(e,t,o){}}]);
//# sourceMappingURL=login.180e4603.js.map